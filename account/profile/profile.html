<div class="header">
  <h2>Past Experiences:</h2>
  <p id="intro-text">Past work places that <span id="name-placeholder"></span> has worked at</p>
  <script>
    // Retrieve the name from local storage, if any
    const name = localStorage.getItem('name');

    // Update the intro text with the name, if available
    const introText = document.getElementById('intro-text');
    const namePlaceholder = document.getElementById('name-placeholder');
    if (name) {
      namePlaceholder.textContent = name;
    } else {
      introText.textContent = "Past work places";
    }
  </script>
</div>

<form id="experience-form">
  <label for="job-role">Job Role:</label>
  <input type="text" id="job-role" name="job-role" required>

  <label for="company-employed">Company</label>
  <input type="text" id="company-employed" name="company-employed" required>

  <label for="location">Location:</label>
  <input type="text" id="location" name="location" required>

  <label for="date-joined">Date Joined:</label>
  <input type="date" id="date-joined" name="date-joined" required>

  <label for="date-left">Date Left:</label>
  <input type="date" id="date-left" name="date-left" required>

  <button type="submit">Add Experience</button>
</form>

<ul id="experiences-list">
  <!-- Existing job experiences will be added here dynamically -->
</ul>

<script>
  const experienceForm = document.getElementById('experience-form');
  const experiencesList = document.getElementById('experiences-list');

  experienceForm.addEventListener('submit', function(event) {
    event.preventDefault(); // prevent the form from submitting

    const jobRoleInput = document.getElementById('job-role');
    const companyInput = document.getElementById('company-employed');
    const locationInput = document.getElementById('location');
    const dateJoinedInput = document.getElementById('date-joined');
    const dateLeftInput = document.getElementById('date-left');

    const experience = {
      jobRole: jobRoleInput.value,
      company: companyInput.value,
      location: locationInput.value,
      dateJoined: dateJoinedInput.value,
      dateLeft: dateLeftInput.value
    };

    // save the experience to local storage
    let savedExperiences = JSON.parse(localStorage.getItem('experiences')) || [];
    savedExperiences.push(experience);
    localStorage.setItem('experiences', JSON.stringify(savedExperiences));

    // display the saved experiences in the list
    experiencesList.innerHTML = '';
    savedExperiences.forEach(function(experience) {
      const listItem = document.createElement('li');
      listItem.innerHTML = `
        <h3>${experience.jobRole}</h3>
        <p>${experience.company}, ${experience.location}</p>
        <p>${experience.dateJoined} - ${experience.dateLeft}</p>
      `;
      experiencesList.appendChild(listItem);
    });
  });

  // load saved experiences from local storage on page load
  const savedExperiences = JSON.parse(localStorage.getItem('experiences')) || [];
  savedExperiences.forEach(function(experience) {
    const listItem = document.createElement('li');
    listItem.innerHTML = `
      <h3>${experience.jobRole}</h3>
      <p>${experience.company}, ${experience.location}</p>
      <p>${experience.dateJoined} - ${experience.dateLeft}</p>
    `;
    experiencesList.appendChild(listItem);
  });
</script>
